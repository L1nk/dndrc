function abs() {
	echo "-- $1's Abilities --"
	cat $1.dnd | grep '^\s*+'
}

function desc() {
	echo "-- $1's Description --"
	cat $1.dnd | grep '\~'
}

function eq() {
	echo "-- $1's Equipment --"
	cat $1.dnd | grep '\['
}

function stats() {
	echo "-- $1's Stats --"
	cat $1.dnd | grep '^>' | cut -f2- -d\> | bash --rcfile ../.dndrc -i /dev/stdin | grep '^>'
}

function combat() {
	echo "-- $1's Combat Modifiers"
	cat $1.dnd | grep '^<' | cut -f2- -d\< | bash --rcfile ../.dndrc -i /dev/stdin | grep '^<'
}

function prof() {
	echo "-- $1's Proficiencies --"
	cat $1.dnd | grep '^\s*\*'
}

function getModifier() {
	ability=$1
	if [ $((ability%2)) -eq 0 ];
	then
    		modifier=$(( ($ability - 10) / 2 ))
	else
    		modifier=$(( ($ability - 11) / 2 ))
	fi
	echo $modifier
}

function printModifier() {
        modifier=$(getModifier $1)
        if [ "$modifier" -lt 0 ]
        then
                echo $modifier
        else
                echo "+$modifier"
        fi

}

function session() {
	touch $1
	echo "$1" > currentSession
}

function dealDamage() {
	character=`cat ../currentCharacter`
        log="$character deals $1 $2 damage to $3."
        currentSession=`cat currentSession`
        echo "$log" >> $currentSession
        combat $character
}

function takeDamage() {
	character=`cat ../currentCharacter`
	currentHealth=`cat currentHealth`
	currentHealth=`expr $currentHealth - $1`
	echo "$currentHealth" > currentHealth
	log="$character takes $1 $2 damage."
	currentSession=`cat currentSession`
	echo "$log" >> $currentSession
	stats $character
}

function heal() {
	character=`cat ../currentCharacter`
        currentHealth=`cat currentHealth`
        currentHealth=`expr $currentHealth + $1`
        echo "$currentHealth" > currentHealth
        log="$character regenerates $1 health from $2."
        currentSession=`cat currentSession`
        echo "$log" >> $currentSession
	stats $character
}

function log() {
	currentSession=`cat currentSession`
	echo "$1" >> $currentSession
}

cat << "EOF"

/***
 *    ______                                        
 *    |  _  \                                       
 *    | | | |_   _ _ __   __ _  ___  ___  _ __  ___ 
 *    | | | | | | | '_ \ / _` |/ _ \/ _ \| '_ \/ __|
 *    | |/ /| |_| | | | | (_| |  __/ (_) | | | \__ \
 *    |___/  \__,_|_| |_|\__, |\___|\___/|_| |_|___/
 *                        __/ |                     
 *                       |___/                      
 *                     _                            
 *                    | |                           
 *      __ _ _ __   __| |                           
 *     / _` | '_ \ / _` |                           
 *    | (_| | | | | (_| |                           
 *     \__,_|_| |_|\__,_|                           
 *                                                  
 *                                                  
 *    ______                                        
 *    |  _  \                                       
 *    | | | |_ __ __ _  __ _  ___  _ __  ___        
 *    | | | | '__/ _` |/ _` |/ _ \| '_ \/ __|       
 *    | |/ /| | | (_| | (_| | (_) | | | \__ \       
 *    |___/ |_|  \__,_|\__, |\___/|_| |_|___/       
 *                      __/ |                       
 *                     |___/                        
 */
 
 5e Character Sheet 
 Version - Alpha
 Created by - l1nk

EOF
